name: StaticAnalysis
on:
  workflow_call:

jobs:
  static-analysis:
    name: StaticAnalysis
    runs-on:
      - ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: StaticAnalysis
        id: build
        run: |
          echo "This is a StaticAnalysis stage"
          
      - name: Set env as secret
        env:
          ARTIFACT_PUSH_URL : ${{ secrets.ARTIFACT_PUSH_URL }}
          ARTIFACT_PUSH_TOKEN : ${{ secrets.ARTIFACT_PUSH_TOKEN }}
        run: |
          import os
          print("ARTIFACT_PUSH_URL:")
          print(os.environ["ARTIFACT_PUSH_URL"])
          print("ARTIFACT_PUSH_TOKEN:")
          print(os.environ["ARTIFACT_PUSH_TOKEN"])
        shell: python

      - name: Send Report
        uses: GlobalLogic-SDV-PoC/github-ci-358931-common-actions/actions/send-s3-report@main
        with:
          artifact_push_url: ${{ secrets.ARTIFACT_PUSH_URL }}
          artifact_push_token: ${{ secrets.ARTIFACT_PUSH_TOKEN }}
          bucket_name: aws-ci-358931-ci-358931-deb-repo-private-1-bucket-5e0e
          
